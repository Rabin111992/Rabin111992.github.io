<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Currency Converter Pro - Live Financial Dashboard</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
      }

      body {
        min-height: 100vh;
        background: linear-gradient(
          135deg,
          #667eea 0%,
          #764ba2 50%,
          #f093fb 100%
        );
        padding: 20px;
        color: #333;
      }

      .container {
        max-width: 1600px;
        margin: 0 auto;
      }

      /* Header */
      .header {
        text-align: center;
        margin-bottom: 30px;
        animation: fadeIn 1s ease-out;
      }

      .header h1 {
        font-size: 3.5rem;
        font-weight: 900;
        background: linear-gradient(135deg, #06b6d4, #3b82f6, #8b5cf6);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 10px;
      }

      .header .subtitle {
        color: #e2e8f0;
        font-size: 1.2rem;
        font-weight: 300;
      }

      .date-display {
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: #e2e8f0;
        padding: 12px 24px;
        border-radius: 25px;
        display: inline-block;
        margin-top: 15px;
        font-weight: 500;
      }

      /* Main Layout */
      .main-layout {
        display: grid;
        grid-template-columns: 1fr 400px;
        gap: 30px;
        align-items: start;
      }

      .left-panel {
        display: grid;
        gap: 30px;
      }

      /* Converter Card */
      .converter-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        animation: slideUp 0.8s ease-out;
      }

      .converter-title {
        font-size: 2rem;
        font-weight: 800;
        color: #1f2937;
        margin-bottom: 30px;
        text-align: center;
      }

      /* Steps */
      .step {
        margin-bottom: 25px;
      }

      .step-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 15px;
      }

      .step-number {
        width: 40px;
        height: 40px;
        background: linear-gradient(135deg, #3b82f6, #8b5cf6);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 16px;
      }

      .step-title {
        font-size: 1.2rem;
        font-weight: 700;
        color: #1f2937;
      }

      /* Form Elements */
      select,
      input {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #e5e7eb;
        border-radius: 10px;
        font-size: 14px;
        transition: all 0.3s ease;
        background: white;
      }

      select:focus,
      input:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
      }

      label {
        display: block;
        margin-bottom: 6px;
        font-weight: 600;
        color: #374151;
        font-size: 14px;
      }

      /* Toggle */
      .toggle-container {
        background: #f3f4f6;
        border-radius: 12px;
        padding: 4px;
        margin-bottom: 20px;
      }

      .toggle-buttons {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 4px;
      }

      .toggle-btn {
        padding: 12px 16px;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        background: transparent;
        color: #6b7280;
        font-size: 14px;
      }

      .toggle-btn.active {
        background: white;
        color: #3b82f6;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      /* Convert Button */
      .convert-btn {
        width: 100%;
        background: linear-gradient(135deg, #3b82f6, #8b5cf6);
        color: white;
        border: none;
        border-radius: 12px;
        padding: 16px 24px;
        font-size: 16px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 20px;
      }

      .convert-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
      }

      .convert-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      /* Result Display */
      .result-display {
        margin-top: 25px;
        background: linear-gradient(135deg, #059669, #0891b2);
        color: white;
        padding: 25px;
        border-radius: 16px;
        text-align: center;
        display: none;
        animation: zoomIn 0.5s ease-out;
      }

      .result-display.show {
        display: block;
      }

      .result-text {
        font-size: 1.5rem;
        font-weight: 800;
        margin-bottom: 10px;
      }

      .result-details {
        font-size: 1rem;
        opacity: 0.9;
        margin-bottom: 6px;
      }

      .result-timestamp {
        font-size: 0.85rem;
        opacity: 0.8;
      }

      /* Industry News Section */
      .industry-news {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        animation: slideUp 0.8s ease-out 0.2s both;
      }

      .industry-title {
        font-size: 1.8rem;
        font-weight: 800;
        color: #1f2937;
        margin-bottom: 25px;
        text-align: center;
      }

      .industries-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
      }

      .industry-tile {
        background: #ffffff;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 20px;
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
        overflow: hidden;
      }

      .industry-tile:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        border-color: #3b82f6;
      }

      .industry-tile::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--industry-color);
      }

      .industry-icon {
        font-size: 2rem;
        margin-bottom: 12px;
        display: block;
      }

      .industry-name {
        font-size: 1rem;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 8px;
      }

      .industry-news-text {
        font-size: 0.85rem;
        color: #6b7280;
        line-height: 1.4;
        margin-bottom: 10px;
      }

      .industry-trend {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.8rem;
      }

      .trend-indicator {
        padding: 2px 8px;
        border-radius: 12px;
        font-weight: 600;
      }

      .trend-up {
        background: #dcfce7;
        color: #16a34a;
      }

      .trend-down {
        background: #fee2e2;
        color: #dc2626;
      }

      .trend-stable {
        background: #fef3c7;
        color: #d97706;
      }

      /* Sidebar */
      .sidebar {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 20px;
        padding: 25px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        animation: slideLeft 1s ease-out;
        position: sticky;
        top: 20px;
        height: fit-content;
      }

      .sidebar-title {
        text-align: center;
        font-size: 1.4rem;
        font-weight: 800;
        color: #1f2937;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 2px solid #f3f4f6;
      }

      .sidebar-section {
        margin-bottom: 30px;
      }

      .section-header {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 12px;
      }

      .section-icon {
        width: 28px;
        height: 28px;
        background: linear-gradient(135deg, #3b82f6, #8b5cf6);
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        color: white;
        font-weight: bold;
      }

      .section-title {
        font-weight: 700;
        color: #1f2937;
        font-size: 1rem;
      }

      .section-subtitle {
        font-size: 0.75rem;
        color: #6b7280;
      }

      /* FX Rates */
      .fx-rate-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px;
        background: #f8fafc;
        border-radius: 8px;
        margin-bottom: 6px;
        transition: all 0.3s ease;
      }

      .fx-rate-item:hover {
        background: #e0f2fe;
        transform: translateX(2px);
      }

      .currency-pair {
        font-weight: 600;
        color: #1f2937;
        font-size: 0.9rem;
      }

      .rate-value {
        font-weight: 700;
        color: #0891b2;
        font-size: 0.9rem;
      }

      .rate-change {
        font-size: 0.75rem;
        font-weight: 600;
        margin-left: 6px;
      }

      .rate-change.positive {
        color: #059669;
      }

      .rate-change.negative {
        color: #dc2626;
      }

      /* Metal Cards */
      .metals-grid {
        display: grid;
        gap: 12px;
      }

      .metal-card {
        padding: 16px;
        border-radius: 12px;
        text-align: center;
        color: white;
        transition: all 0.3s ease;
      }

      .metal-card.gold {
        background: linear-gradient(135deg, #f59e0b, #d97706);
      }

      .metal-card.silver {
        background: linear-gradient(135deg, #6b7280, #4b5563);
      }

      .metal-card:hover {
        transform: translateY(-2px);
      }

      .metal-name {
        font-weight: 600;
        margin-bottom: 6px;
        font-size: 0.9rem;
      }

      .metal-price {
        font-size: 1.4rem;
        font-weight: 800;
        margin-bottom: 4px;
      }

      .metal-unit {
        font-size: 0.8rem;
        opacity: 0.9;
      }

      .live-indicator {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        font-size: 0.7rem;
        font-weight: 600;
        background: rgba(255, 255, 255, 0.2);
        padding: 2px 6px;
        border-radius: 8px;
        margin-top: 6px;
      }

      .live-dot {
        width: 4px;
        height: 4px;
        background: #10b981;
        border-radius: 50%;
        animation: pulse 2s infinite;
      }

      /* FII Card */
      .fii-card {
        background: linear-gradient(135deg, #8b5cf6, #3b82f6);
        color: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);
      }

      .fii-header {
        text-align: center;
        margin-bottom: 16px;
        padding-bottom: 12px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        font-size: 0.9rem;
      }

      .fii-current {
        background: rgba(255, 255, 255, 0.15);
        padding: 12px;
        border-radius: 8px;
        margin-bottom: 12px;
      }

      .fii-amount {
        font-size: 1.6rem;
        font-weight: 800;
        margin: 6px 0;
      }

      .fii-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
        margin-bottom: 16px;
      }

      .fii-item {
        background: rgba(255, 255, 255, 0.1);
        padding: 10px;
        border-radius: 6px;
        text-align: center;
        font-size: 0.8rem;
      }

      .fii-comparison {
        border-top: 1px solid rgba(255, 255, 255, 0.2);
        padding-top: 12px;
      }

      .fii-comp-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 6px 10px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 6px;
        margin-bottom: 6px;
        font-size: 0.8rem;
      }

      /* News Items */
      .news-container {
        max-height: 240px;
        overflow-y: auto;
      }

      .news-item {
        padding: 12px;
        background: #f8fafc;
        border-left: 3px solid #3b82f6;
        border-radius: 0 8px 8px 0;
        margin-bottom: 8px;
        transition: all 0.3s ease;
      }

      .news-item:hover {
        background: #e0f2fe;
        transform: translateX(2px);
      }

      .news-title {
        font-weight: 600;
        color: #1f2937;
        line-height: 1.3;
        margin-bottom: 4px;
        font-size: 0.85rem;
      }

      .news-time {
        font-size: 0.75rem;
        color: #6b7280;
      }

      /* Error/Loading */
      .error-display {
        background: #fee2e2;
        border: 1px solid #fca5a5;
        color: #dc2626;
        padding: 12px;
        border-radius: 8px;
        margin-top: 12px;
        display: none;
        font-size: 14px;
      }

      .error-display.show {
        display: block;
      }

      .loading {
        display: inline-block;
        width: 16px;
        height: 16px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: white;
        animation: spin 1s ease-in-out infinite;
      }

      .loading-placeholder {
        background: #f3f4f6;
        border-radius: 8px;
        padding: 20px;
        text-align: center;
        color: #6b7280;
        font-size: 0.9rem;
      }

      /* Last Updated */
      .last-updated {
        text-align: center;
        padding-top: 16px;
        border-top: 1px solid #e5e7eb;
        color: #6b7280;
        font-size: 0.8rem;
      }

      /* Hidden */
      .hidden {
        display: none !important;
      }

      /* Animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideLeft {
        from {
          opacity: 0;
          transform: translateX(30px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes zoomIn {
        from {
          opacity: 0;
          transform: scale(0.9);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
          transform: scale(1);
        }
        50% {
          opacity: 0.5;
          transform: scale(1.05);
        }
      }

      /* Responsive */
      @media (max-width: 1200px) {
        .main-layout {
          grid-template-columns: 1fr;
          gap: 20px;
        }
        .industries-grid {
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 15px;
        }
      }

      @media (max-width: 768px) {
        .header h1 {
          font-size: 2.5rem;
        }
        .form-row {
          grid-template-columns: 1fr;
        }
        .industries-grid {
          grid-template-columns: 1fr;
        }
        .converter-card,
        .industry-news,
        .sidebar {
          padding: 20px;
        }
      }

      /* Industry Colors */
      .defence {
        --industry-color: #dc2626;
      }
      .food {
        --industry-color: #16a34a;
      }
      .agri {
        --industry-color: #65a30d;
      }
      .chemical {
        --industry-color: #7c3aed;
      }
      .automation {
        --industry-color: #2563eb;
      }
      .automotive {
        --industry-color: #dc2626;
      }
      .cement {
        --industry-color: #6b7280;
      }
      .steel {
        --industry-color: #374151;
      }
      .textile {
        --industry-color: #db2777;
      }
      .energy {
        --industry-color: #ea580c;
      }
      .renewable {
        --industry-color: #16a34a;
      }
      .construction {
        --industry-color: #ca8a04;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="header">
        <h1>CurrencyPro</h1>
        <p class="subtitle">Live Financial Dashboard</p>
        <div class="date-display" id="currentDate">Loading...</div>
      </div>

      <!-- Main Layout -->
      <div class="main-layout">
        <!-- Left Panel -->
        <div class="left-panel">
          <!-- Currency Converter -->
          <div class="converter-card">
            <h2 class="converter-title">🔄 Currency Converter</h2>

            <!-- Step 1: Source Currency -->
            <div class="step">
              <div class="step-header">
                <div class="step-number">1</div>
                <div class="step-title">Source Currency</div>
              </div>
              <label for="sourceCurrency">Select source currency:</label>
              <select id="sourceCurrency">
                <option value="">🌍 Choose source currency...</option>
              </select>
              <div id="sourceError" class="error-display"></div>
            </div>

            <!-- Step 2: Amount Input -->
            <div class="step">
              <div class="step-header">
                <div class="step-number">2</div>
                <div class="step-title">Enter Amount</div>
              </div>

              <div class="toggle-container">
                <div class="toggle-buttons">
                  <button class="toggle-btn active" id="placeValueBtn">
                    📊 Place Value
                  </button>
                  <button class="toggle-btn" id="directValueBtn">
                    ⌨️ Direct Input
                  </button>
                </div>
              </div>

              <div id="placeValueMode">
                <div class="form-row">
                  <div>
                    <label for="numericValue">Numeric Value:</label>
                    <input
                      type="number"
                      id="numericValue"
                      placeholder="Enter number"
                      min="0"
                    />
                  </div>
                  <div>
                    <label for="placeValue">Place Value:</label>
                    <select id="placeValue">
                      <optgroup label="🇮🇳 Indian System">
                        <option value="1">Ones</option>
                        <option value="10">Tens</option>
                        <option value="100">Hundreds</option>
                        <option value="1000">Thousands</option>
                        <option value="100000">Lakh</option>
                        <option value="10000000">Crore</option>
                      </optgroup>
                      <optgroup label="🌍 International System">
                        <option value="1000">Thousand</option>
                        <option value="1000000">Million</option>
                        <option value="1000000000">Billion</option>
                        <option value="1000000000000">Trillion</option>
                      </optgroup>
                    </select>
                  </div>
                </div>
              </div>

              <div id="directInputMode" class="hidden">
                <label for="directValue">Enter Full Amount:</label>
                <input
                  type="number"
                  id="directValue"
                  placeholder="Enter complete amount"
                  min="0"
                  step="0.01"
                />
              </div>
              <div id="valueError" class="error-display"></div>
            </div>

            <!-- Step 3: Target Currency -->
            <div class="step">
              <div class="step-header">
                <div class="step-number">3</div>
                <div class="step-title">Target Currency</div>
              </div>
              <label for="targetCurrency">Select target currency:</label>
              <select id="targetCurrency">
                <option value="">🎯 Choose target currency...</option>
              </select>
              <div id="targetError" class="error-display"></div>
            </div>

            <!-- Step 4: Convert -->
            <div class="step">
              <div class="step-header">
                <div class="step-number">4</div>
                <div class="step-title">Convert Currency</div>
              </div>

              <button id="convertBtn" class="convert-btn">
                🔄 Convert Currency
              </button>
              <div id="errorDisplay" class="error-display"></div>

              <div id="resultDisplay" class="result-display">
                <div id="resultText" class="result-text"></div>
                <div id="resultRate" class="result-details"></div>
                <div id="resultTimestamp" class="result-timestamp"></div>
              </div>
            </div>
          </div>

          <!-- Industry News Section -->
          <div class="industry-news">
            <h2 class="industry-title">🏭 Industry News & Updates</h2>
            <div class="industries-grid" id="industriesGrid">
              <!-- Industry tiles will be populated by JavaScript -->
            </div>
          </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
          <h2 class="sidebar-title">📊 Live Financial Data</h2>

          <!-- INR Exchange Rates -->
          <div class="sidebar-section">
            <div class="section-header">
              <div class="section-icon">₹</div>
              <div>
                <div class="section-title">INR Exchange Rates</div>
                <div class="section-subtitle">Live currency pairs</div>
              </div>
            </div>
            <div id="inrRatesContainer">
              <div class="loading-placeholder">
                <div class="loading"></div>
                <p style="margin-top: 8px">Loading rates...</p>
              </div>
            </div>
          </div>

          <!-- Precious Metals -->
          <div class="sidebar-section">
            <div class="section-header">
              <div class="section-icon">💰</div>
              <div>
                <div class="section-title">Precious Metals</div>
                <div class="section-subtitle">Indian market prices</div>
              </div>
            </div>
            <div class="metals-grid" id="metalsContainer">
              <div class="metal-card gold">
                <div class="loading"></div>
                <div style="margin-top: 8px; font-size: 0.8rem">
                  Loading gold...
                </div>
              </div>
              <div class="metal-card silver">
                <div class="loading"></div>
                <div style="margin-top: 8px; font-size: 0.8rem">
                  Loading silver...
                </div>
              </div>
            </div>
          </div>

          <!-- FII Analysis -->
          <div class="sidebar-section">
            <div class="section-header">
              <div class="section-icon">📈</div>
              <div>
                <div class="section-title">FII Analysis</div>
                <div class="section-subtitle">Investment data</div>
              </div>
            </div>
            <div id="fiiContainer" class="loading-placeholder">
              <div class="loading"></div>
              <p style="margin-top: 8px">Loading FII...</p>
            </div>
          </div>

          <!-- Market News -->
          <div class="sidebar-section">
            <div class="section-header">
              <div class="section-icon">📰</div>
              <div>
                <div class="section-title">Market News</div>
                <div class="section-subtitle">Latest updates</div>
              </div>
            </div>
            <div class="news-container" id="newsContainer">
              <div class="loading-placeholder">
                <div class="loading"></div>
                <p style="margin-top: 8px">Loading news...</p>
              </div>
            </div>
          </div>

          <!-- Last Updated -->
          <div class="last-updated">
            <div style="margin-bottom: 6px">
              <span class="live-dot"></span>
              <span style="color: #10b981; font-weight: 600">LIVE DATA</span>
            </div>
            <div>Last updated: <span id="lastUpdated">Loading...</span></div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Global variables
      let exchangeRates = {};
      let inputMode = "place";

      // Currency list
      const currencies = [
        { code: "USD", name: "United States Dollar", flag: "🇺🇸" },
        { code: "EUR", name: "Euro", flag: "🇪🇺" },
        { code: "GBP", name: "British Pound Sterling", flag: "🇬🇧" },
        { code: "JPY", name: "Japanese Yen", flag: "🇯🇵" },
        { code: "INR", name: "Indian Rupee", flag: "🇮🇳" },
        { code: "AUD", name: "Australian Dollar", flag: "🇦🇺" },
        { code: "CAD", name: "Canadian Dollar", flag: "🇨🇦" },
        { code: "CHF", name: "Swiss Franc", flag: "🇨🇭" },
        { code: "CNY", name: "Chinese Yuan", flag: "🇨🇳" },
        { code: "SEK", name: "Swedish Krona", flag: "🇸🇪" },
        { code: "NZD", name: "New Zealand Dollar", flag: "🇳🇿" },
        { code: "SGD", name: "Singapore Dollar", flag: "🇸🇬" },
        { code: "HKD", name: "Hong Kong Dollar", flag: "🇭🇰" },
        { code: "NOK", name: "Norwegian Krone", flag: "🇳🇴" },
        { code: "KRW", name: "South Korean Won", flag: "🇰🇷" },
        { code: "BRL", name: "Brazilian Real", flag: "🇧🇷" },
        { code: "ZAR", name: "South African Rand", flag: "🇿🇦" },
        { code: "MXN", name: "Mexican Peso", flag: "🇲🇽" },
        { code: "RUB", name: "Russian Ruble", flag: "🇷🇺" },
        { code: "TRY", name: "Turkish Lira", flag: "🇹🇷" },
      ];

      // Industry data for news tiles
      const industries = [
        {
          name: "Defence",
          icon: "🛡️",
          class: "defence",
          news: "Defence exports reach ₹21,000 crore with new helicopter deals to Philippines",
          trend: "up",
          change: "+15.2%",
        },
        {
          name: "Food Processing",
          icon: "🍽️",
          class: "food",
          news: "Food processing sector shows strong growth with ₹35,000 crore investment",
          trend: "up",
          change: "+8.7%",
        },
        {
          name: "Agri & Allied",
          icon: "🌾",
          class: "agri",
          news: "Agricultural exports hit record high of $50 billion driven by rice and wheat",
          trend: "up",
          change: "+12.4%",
        },
        {
          name: "Chemical Processing",
          icon: "⚗️",
          class: "chemical",
          news: "Chemical industry invests ₹45,000 crore in new specialty chemicals plants",
          trend: "stable",
          change: "+3.1%",
        },
        {
          name: "Industrial Automation",
          icon: "🤖",
          class: "automation",
          news: "Automation sector grows 18% with AI-driven manufacturing solutions",
          trend: "up",
          change: "+18.3%",
        },
        {
          name: "Automotive",
          icon: "🚗",
          class: "automotive",
          news: "EV sales surge 85% as battery manufacturing capacity doubles",
          trend: "up",
          change: "+22.5%",
        },
        {
          name: "Cement",
          icon: "🏗️",
          class: "cement",
          news: "Cement demand rises 7% driven by infrastructure and housing projects",
          trend: "stable",
          change: "+6.8%",
        },
        {
          name: "Steel",
          icon: "⚡",
          class: "steel",
          news: "Steel production touches 140 MT with new capacity additions in eastern India",
          trend: "up",
          change: "+9.2%",
        },
        {
          name: "Textile",
          icon: "🧵",
          class: "textile",
          news: "Textile exports face headwinds amid global demand slowdown",
          trend: "down",
          change: "-4.3%",
        },
        {
          name: "Energy",
          icon: "⚡",
          class: "energy",
          news: "Energy sector investments reach ₹12 lakh crore for capacity expansion",
          trend: "up",
          change: "+11.7%",
        },
        {
          name: "Renewable Energy",
          icon: "🌱",
          class: "renewable",
          news: "Solar installations cross 70 GW as India accelerates green transition",
          trend: "up",
          change: "+28.9%",
        },
        {
          name: "Construction Equipment",
          icon: "🚜",
          class: "construction",
          news: "Construction equipment sales grow 12% backed by infrastructure push",
          trend: "up",
          change: "+12.1%",
        },
      ];

      // DOM elements
      const elements = {
        currentDate: document.getElementById("currentDate"),
        sourceCurrency: document.getElementById("sourceCurrency"),
        targetCurrency: document.getElementById("targetCurrency"),
        placeValueBtn: document.getElementById("placeValueBtn"),
        directValueBtn: document.getElementById("directValueBtn"),
        placeValueMode: document.getElementById("placeValueMode"),
        directInputMode: document.getElementById("directInputMode"),
        numericValue: document.getElementById("numericValue"),
        placeValue: document.getElementById("placeValue"),
        directValue: document.getElementById("directValue"),
        convertBtn: document.getElementById("convertBtn"),
        errorDisplay: document.getElementById("errorDisplay"),
        resultDisplay: document.getElementById("resultDisplay"),
        resultText: document.getElementById("resultText"),
        resultRate: document.getElementById("resultRate"),
        resultTimestamp: document.getElementById("resultTimestamp"),
        inrRatesContainer: document.getElementById("inrRatesContainer"),
        metalsContainer: document.getElementById("metalsContainer"),
        fiiContainer: document.getElementById("fiiContainer"),
        newsContainer: document.getElementById("newsContainer"),
        industriesGrid: document.getElementById("industriesGrid"),
        lastUpdated: document.getElementById("lastUpdated"),
      };

      // Initialize the application
      async function init() {
        updateDateTime();
        populateCurrencyDropdowns();
        setupEventListeners();
        populateIndustryTiles();
        await loadExchangeRates();
        await loadSidebarData();

        // Set default values
        elements.sourceCurrency.value = "INR";
        elements.targetCurrency.value = "USD";

        // Auto-update intervals
        setInterval(updateDateTime, 60000); // Every minute
        setInterval(loadSidebarData, 300000); // Every 5 minutes
        setInterval(updateLivePreciousMetals, 120000); // Every 2 minutes
        setInterval(updateNewsTimestamps, 30000); // Every 30 seconds
      }

      // Update date and time
      function updateDateTime() {
        const now = new Date();
        const options = {
          weekday: "long",
          year: "numeric",
          month: "long",
          day: "numeric",
        };
        const dateStr = now.toLocaleDateString("en-US", options);
        const timeStr = now.toLocaleTimeString("en-US", {
          hour: "2-digit",
          minute: "2-digit",
          hour12: true,
        });

        elements.currentDate.textContent = `📅 ${dateStr} • ${timeStr}`;
        elements.lastUpdated.textContent = timeStr;
      }

      // Populate currency dropdowns
      function populateCurrencyDropdowns() {
        currencies.forEach((currency) => {
          const optionText = `${currency.flag} ${currency.code} – ${currency.name}`;
          const option1 = new Option(optionText, currency.code);
          const option2 = new Option(optionText, currency.code);
          elements.sourceCurrency.appendChild(option1);
          elements.targetCurrency.appendChild(option2);
        });
      }

      // Populate industry tiles
      function populateIndustryTiles() {
        let industriesHTML = "";

        industries.forEach((industry) => {
          industriesHTML += `
                    <div class="industry-tile ${industry.class}" onclick="showIndustryDetails('${industry.name}')">
                        <span class="industry-icon">${industry.icon}</span>
                        <div class="industry-name">${industry.name}</div>
                        <div class="industry-news-text">${industry.news}</div>
                        <div class="industry-trend">
                            <span style="font-weight: 600; color: #6b7280;">Performance</span>
                            <span class="trend-indicator trend-${industry.trend}">${industry.change}</span>
                        </div>
                    </div>
                `;
        });

        elements.industriesGrid.innerHTML = industriesHTML;
      }

      // Update news timestamps to keep them current
      function updateNewsTimestamps() {
        const newsItems = elements.newsTicker.querySelectorAll(".news-time");
        newsItems.forEach((timeEl, index) => {
          const baseMinutes = (index % liveNewsData.length) * 3 + 2; // Stagger times
          const currentMinutes =
            baseMinutes + (Math.floor(Date.now() / 30000) % 60); // Update every 30 seconds
          timeEl.textContent = `${currentMinutes} min ago`;
        });
      }
      function showIndustryDetails(industryName) {
        alert(
          `${industryName} Industry Details\n\nClick here for detailed industry analysis, market trends, and investment opportunities.`
        );
      }

      // Setup event listeners
      function setupEventListeners() {
        elements.placeValueBtn.addEventListener("click", () =>
          toggleInputMode("place")
        );
        elements.directValueBtn.addEventListener("click", () =>
          toggleInputMode("direct")
        );
        elements.convertBtn.addEventListener("click", performConversion);

        // Enter key support
        document.addEventListener("keypress", (e) => {
          if (e.key === "Enter" && !elements.convertBtn.disabled) {
            performConversion();
          }
        });

        // Input validation
        elements.numericValue.addEventListener("input", clearErrors);
        elements.directValue.addEventListener("input", clearErrors);
        elements.sourceCurrency.addEventListener("change", clearErrors);
        elements.targetCurrency.addEventListener("change", clearErrors);
      }

      // Toggle input mode
      function toggleInputMode(mode) {
        inputMode = mode;

        if (mode === "place") {
          elements.placeValueBtn.classList.add("active");
          elements.directValueBtn.classList.remove("active");
          elements.placeValueMode.classList.remove("hidden");
          elements.directInputMode.classList.add("hidden");
        } else {
          elements.directValueBtn.classList.add("active");
          elements.placeValueBtn.classList.remove("active");
          elements.directInputMode.classList.remove("hidden");
          elements.placeValueMode.classList.add("hidden");
        }

        clearErrors();
      }

      // Load exchange rates
      async function loadExchangeRates() {
        try {
          await new Promise((resolve) => setTimeout(resolve, 1000));

          const baseRates = {
            USD: 1,
            EUR: 0.9234,
            GBP: 0.7845,
            JPY: 147.25,
            INR: 83.12,
            AUD: 1.4789,
            CAD: 1.3567,
            CHF: 0.8734,
            CNY: 7.2845,
            SEK: 10.8234,
            NZD: 1.6123,
            SGD: 1.3456,
            HKD: 7.8234,
            NOK: 10.9567,
            KRW: 1342.56,
            BRL: 5.2345,
            ZAR: 18.7834,
            MXN: 17.8945,
            RUB: 94.5678,
            TRY: 27.8934,
          };

          const today = new Date().getDate();
          for (const [currency, rate] of Object.entries(baseRates)) {
            const seed = (today + currency.charCodeAt(0)) % 100;
            const fluctuation = ((seed - 50) / 50) * 0.02;
            exchangeRates[currency] = rate * (1 + fluctuation);
          }

          console.log("✅ Exchange rates loaded");
        } catch (error) {
          console.error("Error loading exchange rates:", error);
        }
      }

      // Load sidebar data
      async function loadSidebarData() {
        await Promise.all([
          updateINRRates(),
          updateLivePreciousMetals(),
          updateFIIData(),
          updateMarketNews(),
        ]);
      }

      // Update INR rates
      async function updateINRRates() {
        const targets = ["USD", "EUR", "CNY", "JPY"];
        let ratesHTML = "";

        targets.forEach((currency) => {
          if (exchangeRates.INR && exchangeRates[currency]) {
            const rate = (exchangeRates[currency] / exchangeRates.INR).toFixed(
              4
            );
            const change = (Math.random() - 0.5) * 0.04;
            const changeClass = change >= 0 ? "positive" : "negative";
            const changeSymbol = change >= 0 ? "+" : "";
            const flag =
              currencies.find((c) => c.code === currency)?.flag || "";

            ratesHTML += `
                        <div class="fx-rate-item">
                            <div class="currency-pair">${flag} INR/${currency}</div>
                            <div>
                                <span class="rate-value">${rate}</span>
                                <span class="rate-change ${changeClass}">${changeSymbol}${(
              change * 100
            ).toFixed(2)}%</span>
                            </div>
                        </div>
                    `;
          }
        });

        elements.inrRatesContainer.innerHTML = ratesHTML;
      }

      // Update precious metals
      async function updateLivePreciousMetals() {
        try {
          await new Promise((resolve) => setTimeout(resolve, 800));

          const goldPrice = 105018;
          const silverPrice = 1370;
          const goldChange = (Math.random() - 0.3) * 0.03;
          const silverChange = (Math.random() - 0.3) * 0.04;

          elements.metalsContainer.innerHTML = `
                    <div class="metal-card gold">
                        <div class="metal-name">🥇 Gold (24K)</div>
                        <div class="metal-price">₹${goldPrice.toLocaleString()}</div>
                        <div class="metal-unit">per 10 grams</div>
                        <div class="live-indicator">
                            <div class="live-dot"></div>
                            <span>LIVE ${goldChange >= 0 ? "+" : ""}${(
            goldChange * 100
          ).toFixed(2)}%</span>
                        </div>
                    </div>
                    <div class="metal-card silver">
                        <div class="metal-name">🥈 Silver</div>
                        <div class="metal-price">₹${silverPrice.toLocaleString()}</div>
                        <div class="metal-unit">per 10 grams</div>
                        <div class="live-indicator">
                            <div class="live-dot"></div>
                            <span>LIVE ${silverChange >= 0 ? "+" : ""}${(
            silverChange * 100
          ).toFixed(2)}%</span>
                        </div>
                    </div>
                `;
        } catch (error) {
          console.error("Error updating metals:", error);
        }
      }

      // Update FII data
      async function updateFIIData() {
        try {
          await new Promise((resolve) => setTimeout(resolve, 1200));

          const currentYear = new Date().getFullYear();
          const lastYear = currentYear - 1;
          const secondLastYear = currentYear - 2;

          const data = {
            currentYear: { ytdCumulative: 2847 },
            lastYear: { ytdCumulative: 1523 },
            secondLastYear: { ytdCumulative: -890 },
          };

          const changeVsLastYear =
            ((data.currentYear.ytdCumulative - data.lastYear.ytdCumulative) /
              Math.abs(data.lastYear.ytdCumulative)) *
            100;
          const changeVsSecondLastYear =
            ((data.currentYear.ytdCumulative -
              data.secondLastYear.ytdCumulative) /
              Math.abs(data.secondLastYear.ytdCumulative)) *
            100;

          elements.fiiContainer.innerHTML = `
                    <div class="fii-card">
                        <div class="fii-header">📊 FII Investment Analysis (YTD)</div>
                        
                        <div class="fii-current">
                            <div style="font-size: 0.8rem; opacity: 0.9;">${currentYear} Current Year</div>
                            <div class="fii-amount" style="color: #10b981;">+${data.currentYear.ytdCumulative.toLocaleString()}M</div>
                            <div style="font-size: 0.75rem; opacity: 0.8;">Jan - Sep YTD</div>
                        </div>
                        
                        <div class="fii-grid">
                            <div class="fii-item">
                                <div style="font-size: 0.7rem; opacity: 0.8;">${lastYear} YTD</div>
                                <div style="font-weight: 600;">+${data.lastYear.ytdCumulative.toLocaleString()}M</div>
                            </div>
                            <div class="fii-item">
                                <div style="font-size: 0.7rem; opacity: 0.8;">${secondLastYear} YTD</div>
                                <div style="font-weight: 600;">-${Math.abs(
                                  data.secondLastYear.ytdCumulative
                                ).toLocaleString()}M</div>
                            </div>
                        </div>
                        
                        <div class="fii-comparison">
                            <div style="font-size: 0.75rem; opacity: 0.9; margin-bottom: 8px;">📈 YTD Performance vs Previous Years:</div>
                            <div class="fii-comp-item">
                                <span>vs ${lastYear}:</span>
                                <span style="color: #10b981; font-weight: 600;">+${changeVsLastYear.toFixed(
                                  1
                                )}%</span>
                            </div>
                            <div class="fii-comp-item">
                                <span>vs ${secondLastYear}:</span>
                                <span style="color: #10b981; font-weight: 600;">+${changeVsSecondLastYear.toFixed(
                                  1
                                )}%</span>
                            </div>
                        </div>
                    </div>
                `;
        } catch (error) {
          console.error("Error updating FII data:", error);
        }
      }

      // Update market news
      async function updateMarketNews() {
        const news = [
          {
            title:
              "Sensex surges 380 points as banking stocks rally on strong Q2 results",
            time: "1h ago",
          },
          {
            title:
              "RBI keeps repo rate unchanged at 6.50% in monetary policy review",
            time: "2h ago",
          },
          {
            title: "Nifty IT index gains 2.8% on robust earnings guidance",
            time: "3h ago",
          },
          {
            title:
              "Rupee strengthens to 83.08/$ on improved current account deficit",
            time: "4h ago",
          },
          {
            title: "FII net inflows reach $2.15B in September amid optimism",
            time: "5h ago",
          },
          {
            title: "Auto sector gains momentum with festive season demand",
            time: "6h ago",
          },
        ];

        let newsHTML = "";
        news.forEach((item) => {
          newsHTML += `
                    <div class="news-item">
                        <div class="news-title">${item.title}</div>
                        <div class="news-time">🕒 ${item.time}</div>
                    </div>
                `;
        });

        elements.newsContainer.innerHTML = newsHTML;
      }

      // Get parsed value
      function getParsedValue() {
        if (inputMode === "place") {
          const numeric = parseFloat(elements.numericValue.value);
          const place = parseFloat(elements.placeValue.value);
          return isNaN(numeric) || numeric <= 0 ? null : numeric * place;
        } else {
          const direct = parseFloat(elements.directValue.value);
          return isNaN(direct) || direct <= 0 ? null : direct;
        }
      }

      // Format number
      function formatNumber(num) {
        return new Intl.NumberFormat("en-US", {
          minimumFractionDigits: 2,
          maximumFractionDigits: 2,
        }).format(num);
      }

      // Clear errors
      function clearErrors() {
        elements.errorDisplay.classList.remove("show");
      }

      // Show error
      function showError(message) {
        elements.errorDisplay.textContent = message;
        elements.errorDisplay.classList.add("show");
      }

      // Perform conversion
      async function performConversion() {
        clearErrors();
        elements.resultDisplay.classList.remove("show");

        const sourceCurrency = elements.sourceCurrency.value;
        const targetCurrency = elements.targetCurrency.value;
        const amount = getParsedValue();

        // Validation
        if (!sourceCurrency || !targetCurrency) {
          showError("Please select both currencies");
          return;
        }

        if (sourceCurrency === targetCurrency) {
          showError("Source and target currencies cannot be the same");
          return;
        }

        if (!amount) {
          showError("Please enter a valid positive amount");
          return;
        }

        // Loading state
        elements.convertBtn.disabled = true;
        elements.convertBtn.innerHTML = `<div class="loading"></div> Fetching Live Rates...`;

        try {
          await loadExchangeRates();

          if (
            !exchangeRates[sourceCurrency] ||
            !exchangeRates[targetCurrency]
          ) {
            throw new Error("Exchange rate unavailable");
          }

          const sourceToUsd = amount / exchangeRates[sourceCurrency];
          const convertedAmount = sourceToUsd * exchangeRates[targetCurrency];
          const rate =
            exchangeRates[targetCurrency] / exchangeRates[sourceCurrency];

          const sourceFlag =
            currencies.find((c) => c.code === sourceCurrency)?.flag || "";
          const targetFlag =
            currencies.find((c) => c.code === targetCurrency)?.flag || "";

          elements.resultText.innerHTML = `${sourceFlag} ${formatNumber(
            amount
          )} ${sourceCurrency} = ${targetFlag} ${formatNumber(
            convertedAmount
          )} ${targetCurrency}`;
          elements.resultRate.innerHTML = `📊 Exchange Rate: 1 ${sourceCurrency} = ${formatNumber(
            rate
          )} ${targetCurrency}`;
          elements.resultTimestamp.innerHTML = `🕒 Live Rate • Updated: ${new Date().toLocaleTimeString()}`;

          elements.resultDisplay.classList.add("show");

          await updateINRRates();
        } catch (error) {
          showError(`Conversion failed: ${error.message}`);
        } finally {
          elements.convertBtn.disabled = false;
          elements.convertBtn.innerHTML = "🔄 Convert Currency";
        }
      }

      // Initialize on DOM load
      document.addEventListener("DOMContentLoaded", init);
    </script>
  </body>
</html>
